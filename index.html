<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ° Math Kingdom - Learn Math with Magic!</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <!-- Header with Rank Display -->
        <header class="header">
            <h1 class="title">ğŸ° Math Kingdom âœ¨</h1>
            <p class="subtitle">Learn Math with Magic!</p>
            <div class="rank-display" id="rankDisplay">
                <span class="rank-icon" id="rankIcon">ğŸŒ±</span>
                <div class="rank-info">
                    <div class="rank-name" id="rankName">Little Seedling</div>
                    <div class="rank-score">Score: <span id="totalScore">0</span> â­</div>
                </div>
            </div>
        </header>

        <!-- Welcome Screen -->
        <section class="screen active" id="welcomeScreen">
            <div class="card welcome-card">
                <h2>ğŸŒ¸ Welcome, little learner! ğŸŒ¸</h2>
                <p>Enter your username to begin your magical adventure:</p>
                <div
                    style="margin: 10px 0; padding: 10px; background: rgba(255,182,193,0.2); border-radius: 8px; font-size: 14px;">
                    âœ¨ Allowed users: <strong>quynhanh</strong> or <strong>khanhan</strong>
                </div>
                <input type="text" id="playerName" class="name-input" placeholder="Your username..." maxlength="20">
                <button class="btn btn-primary" onclick="Game.start()">Start Adventure! ğŸš€</button>
            </div>
        </section>

        <!-- Menu Screen -->
        <section class="screen" id="menuScreen">
            <div class="topics-grid" id="topicsGrid"></div>
        </section>

        <!-- Quiz Screen -->
        <section class="screen" id="quizScreen">
            <div class="card quiz-card">
                <div class="quiz-header">
                    <button class="btn btn-back" onclick="Game.backToMenu()">â† Back</button>
                    <div class="progress-info">
                        <span>Question <span id="currentQ">1</span>/<span id="totalQ">10</span></span>
                        <span class="score-badge">Correct: <span id="correctCount">0</span> â­</span>
                    </div>
                </div>

                <div class="question-box" id="questionBox">
                    <div class="question-visual" id="qVisual">ğŸŒ¸</div>
                    <div class="question-text" id="qText">Loading question...</div>
                </div>

                <div class="options-container" id="optionsContainer"></div>

                <div class="input-container" id="inputContainer" style="display:none;">
                    <input type="text" id="answerInput" class="answer-input" placeholder="?" inputmode="numeric">
                    <button class="btn btn-primary" onclick="Quiz.checkInputAnswer()">Check âœ¨</button>
                </div>

                <div class="feedback-box" id="feedback"></div>
                <button class="btn btn-next" id="nextBtn" onclick="Quiz.next()">Next Question â†’</button>
            </div>
        </section>
    </div>

    <!-- Celebration Modal -->
    <div class="modal-overlay" id="celebrationModal">
        <div class="modal-content">
            <div class="modal-icon" id="modalIcon">ğŸ‰</div>
            <h2 class="modal-title" id="modalTitle">Amazing!</h2>
            <p class="modal-message" id="modalMessage">You did great!</p>
            <button class="btn btn-primary" onclick="Modal.close()">Continue ğŸŒŸ</button>
        </div>
    </div>

    <!-- Confetti Container -->
    <div class="confetti-container" id="confettiContainer"></div>

    <!-- Load Firebase SDK (ES Modules from CDN) -->
    <script type="module">
        // Import and initialize Firebase first
        import './firebase-config.js';
    </script>

    <!-- Load Core Engine -->
    <script src="core.js" type="module"></script>
</body>

</html>